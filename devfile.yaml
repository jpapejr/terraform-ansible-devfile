schemaVersion: 2.2.0
metadata:
  name: terraform-ansible-dev
  version: 1.0.0
  description: Workspace for Terraform and Ansible development with LLM capabilities
components:
  - name: tools
    container:
      image: registry.access.redhat.com/ubi9/ubi-minimal:latest
      command: ["sleep", "infinity"]
      memoryLimit: 2Gi
      env:
        - name: ANSIBLE_CONFIG
          value: /home/user/.ansible.cfg
      volumeMounts:
        - name: ansible-config
          path: /home/user/.ansible.cfg
  - name: vscode-theia
    editor:
      id: che-incubator/che-code/insiders
    extensions:
      - redhat.ansible
      - ms-azuretools.vscode-azureterraform
      - continue.continue
  - name: ollama
    container:
      image: ollama/ollama:latest
      ports:
        - name: ollama-api
          containerPort: 11434
          protocol: TCP
      command: ["ollama", "serve"]
      memoryLimit: 4Gi
      volumes:
        - name: ollama-data
          mountPath: /root/.ollama
      env:
        - name: OLLAMA_HOST
          value: 0.0.0.0
        - name: OLLAMA_LISTEN
          value: ":11434"
  - name: ansible-config
    volume:
      size: 100Mi
